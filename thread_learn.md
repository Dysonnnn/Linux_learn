[[嵌入式编程]应用层开发篇之多线程与网络编程](https://www.bilibili.com/video/av50884664/?p=1)

线程 ，是一个轻量级 进程

进程：一个正在执行的程序，它是资源分配的最下单位

线程，有时候又称为轻量级进程，程序执行的最小单位，，系统独立调度和分派cpu的基本单位，它是进程中的一个实体。一个进程中可以有多个线程，这些线程共享进程的所有资源，线程本身只包含一点必不可少的资源。

进程出现了很多弊端，一是进程是资源拥有者，创建、撤销与切换存在较大的时空开销，因此需要引入轻型进程；二是由于堆成多处理机（SMP）出现，可以满肚多个运行单元，而多进程并行开销过大。

（开新的进程，会拷贝父进程的所有资源。


## 线程的一些术语
并发：
同一时刻，只能有一条指令执行，但多个进程指令被快速轮换执行，使得在宏观上具有多个进程同时执行的效果。
看起来同时发生，单核处理器。

并行：
在同一时刻，多条指令在多个处理器上同时执行。
真正的同时发生，多核处理器。

同步：
彼此有依赖关系的掉头用不应该同时发生，而同步就是要阻止那些同时发生的事情。

异步：
一部的概念和同步相对，任何两个彼此独立的操作都是异步的，它表明事情独立的发生。

多线程的优势：
1. 在多处理器中开发程序的并行性
2. 在等待慢速IO操作时，程序可以执行其他操作，提高并发性
3. 模块化的编程，能更清晰地表达程序中独立事件的关系，结构清晰
4. 占用较少的系统资源


 - 多线程不一定是多处理器

||线程id |进程 id|
|标识符类型| pthread_t| pid_t|
|获取id|pthread_seld()|getid()|
|创建|pthread_create()|fork()|

获取线程id

创建线程。
## 线程的生命周期
1. 当c程序运行时，首先运行main函数。在线程代码中，这个特殊的执行流被称作初始线程或者主线程。可以在初始线程中做任何普通线程可以做的事情。
2. 主线程的特殊性在于，他在mian函数返回的时候，会导致进程结束，进程内所有的线程也将结束。

可以在主线程中调用pthread_exit()函数，这样进程就会等待所有线程结束时才结束。

3. 主线程接收参数的方式是通过argc 和argv，而普通的线程只有一个参数void*

4. 在绝大多数情况下，主线程在默认堆栈上运行，这个堆栈可以增长到足够的长度。而普通现场的堆栈是受限制的，一旦溢出就会产生错误。

### 线程的创建
主线程是随着进程的创建而创建
其他线程可以通过调用函数来创建，主要调用pthread_create


s